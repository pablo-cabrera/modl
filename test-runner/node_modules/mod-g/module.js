modl.$module({
    "/module": function() {
        modl.
        uses("/lib/Thing").
        uses("/lib/AnotherThing").
        uses("bar").
        uses("baz").

        unit(function(module) {
            var util = modl.Util;

            module.exports.name = "foo";

            util.forEach(module.imports, function(v, k) {
                module.exports[k] = v;
            });
        });
    },
    "/lib/AnotherThing": function() {
        modl.
        uses("/lib/Thing").
        unit(function(module, Thing) {
            module.exports.name = "foo-AnotherThing";
            module.exports.Thing = Thing;
        });
    },
    "/lib/Thing": function() {
        modl.
        unit(function(module) {
            module.exports.name = "foo-Thing";
        });
    },
    "bar": {
        "/module": function() {
            modl.
            uses("/lib/Thing").
            uses("/lib/AnotherThing").
            uses("baz").

            unit(function(module) {
                var util = modl.Util;

                module.exports.name = "bar";

                util.forEach(module.imports, function(v, k) {
                    module.exports[k] = v;
                });
            });
        },
        "/lib/AnotherThing": function() {
            modl.
            uses("/lib/Thing").
            unit(function(module, Thing) {
                module.exports.name = "bar-AnotherThing";
                module.exports.Thing = Thing;
            });
        },
        "/lib/Thing": function() {
            modl.
            unit(function(module) {
                module.exports.name = "bar-Thing";
            });
        },
        "baz": "baz"
    },
    "baz": {
        "/module": function() {
            modl.
            uses("/lib/Thing").
            uses("/lib/AnotherThing").

            unit(function(module) {
                var util = modl.Util;

                module.exports.name = "baz";

                util.forEach(module.imports, function(v, k) {
                    module.exports[k] = v;
                });
            });
        },
        "/lib/AnotherThing": function() {
            modl.
            uses("/lib/Thing").
            unit(function(module, Thing) {
                module.exports.name = "baz-AnotherThing";
                module.exports.Thing = Thing;
            });
        },
        "/lib/Thing": function() {
            modl.
            unit(function(module) {
                module.exports.name = "baz-Thing";
            });
        }
    }
});